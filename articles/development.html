<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Development features of isoreader • Isoreader</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Development features of isoreader">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-106138361-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-106138361-3');
</script>
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Isoreader</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/quick_start.html">Quick Start</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Full Examples

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dual_inlet.html">Dual Inlet</a>
    </li>
    <li>
      <a href="../articles/continuous_flow.html">Continuous Flow</a>
    </li>
    <li>
      <a href="../articles/scan.html">Scan</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Advanced

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/operations.html">Operations</a>
    </li>
    <li>
      <a href="../articles/development.html">Development</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/isoverse/isoreader" class="external-link">
    <span class="fa fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Development features of isoreader</h1>
            
            <h4 data-toc-skip class="date">2025-10-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/isoverse/isoreader/blob/master/vignettes/development.Rmd" class="external-link"><code>vignettes/development.Rmd</code></a></small>
      <div class="hidden name"><code>development.Rmd</code></div>

    </div>

    
    
<p>This vignette introduces some of the development features of the
isoreader package and is aimed primarily at code contributors interested
in expanding its functionality or helping with bug fixes.</p>
<div class="section level2">
<h2 id="adding-new-file-format-readers">Adding new file format readers<a class="anchor" aria-label="anchor" href="#adding-new-file-format-readers"></a>
</h2>
<p>Testing out new file format readers is easiest by registering a new
reader function for a specific file extension using
<code>iso_register_dual_inlet_file_reader</code> and
<code>iso_register_continuous_flow_file_reader</code>, respectively.
Both require an extension (e.g. <code>".ext"</code>), name of the new
reader function (<code>"new_reader"</code>), and optionally a
description. Both functions automatically return a data frame with a
list of all registered reader. Overwriting of existing readers with a
different function requires an explicit <code>overwrite = TRUE</code>
flag. All reader functions must accept an isoreader data structure
object (<code>ds</code>) as the first argument, a list of reader
specific options as the second argument (<code>options</code>), and
should return the structure with data filled in for downstream isoreader
operations to work smoothly. The following minimal example illustrates
how to do this with the <code>new_reader</code> function simply printing
out the layout of the provided data structure skeleton
<code>ds</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_reader</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">ds</span>, <span class="va">options</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">isoreader</span><span class="fu">:::</span><span class="fu">log_message</span><span class="op">(</span><span class="st">"this is the new reader!"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># register new reader</span></span>
<span><span class="va">readers</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/file_readers.html">iso_register_dual_inlet_file_reader</a></span><span class="op">(</span><span class="st">".new.did"</span>, <span class="st">"new_reader"</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">readers</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="10%">
<col width="16%">
<col width="6%">
<col width="12%">
<col width="6%">
<col width="10%">
<col width="23%">
<col width="6%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="left">type</th>
<th align="left">call</th>
<th align="left">extension</th>
<th align="left">func</th>
<th align="left">cacheable</th>
<th align="left">post_read_check</th>
<th align="left">description</th>
<th align="left">software</th>
<th align="left">env</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">dual inlet</td>
<td align="left">iso_read_dual_inlet</td>
<td align="left">.caf</td>
<td align="left">iso_read_caf</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">Dual Inlet file format (older)</td>
<td align="left">Isodat</td>
<td align="left">isoreader</td>
</tr>
<tr class="even">
<td align="left">dual inlet</td>
<td align="left">iso_read_dual_inlet</td>
<td align="left">.did</td>
<td align="left">iso_read_did</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">Dual Inlet file format (newer)</td>
<td align="left">Isodat</td>
<td align="left">isoreader</td>
</tr>
<tr class="odd">
<td align="left">dual inlet</td>
<td align="left">iso_read_dual_inlet</td>
<td align="left">.txt</td>
<td align="left">iso_read_nu</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">Dual Inlet file format</td>
<td align="left">Nu</td>
<td align="left">isoreader</td>
</tr>
<tr class="even">
<td align="left">continuous flow</td>
<td align="left">iso_read_continuous_flow</td>
<td align="left">.cf</td>
<td align="left">iso_read_cf</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">Continuous Flow file format (older)</td>
<td align="left">Isodat</td>
<td align="left">isoreader</td>
</tr>
<tr class="odd">
<td align="left">continuous flow</td>
<td align="left">iso_read_continuous_flow</td>
<td align="left">.dxf</td>
<td align="left">iso_read_dxf</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">Continuous Flow file format (newer)</td>
<td align="left">Isodat</td>
<td align="left">isoreader</td>
</tr>
<tr class="even">
<td align="left">continuous flow</td>
<td align="left">iso_read_continuous_flow</td>
<td align="left">.iarc</td>
<td align="left">iso_read_flow_iarc</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">Continuous Flow data archive</td>
<td align="left">ionOS</td>
<td align="left">isoreader</td>
</tr>
<tr class="odd">
<td align="left">scan</td>
<td align="left">iso_read_scan</td>
<td align="left">.scn</td>
<td align="left">iso_read_scn</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">Scan file format</td>
<td align="left">Isodat</td>
<td align="left">isoreader</td>
</tr>
<tr class="even">
<td align="left">continuous flow</td>
<td align="left">iso_read_continuous_flow</td>
<td align="left">.cf.rds</td>
<td align="left">iso_read_rds</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">R Data Storage</td>
<td align="left">isoreader</td>
<td align="left">isoreader</td>
</tr>
<tr class="odd">
<td align="left">dual inlet</td>
<td align="left">iso_read_dual_inlet</td>
<td align="left">.di.rds</td>
<td align="left">iso_read_rds</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">R Data Storage</td>
<td align="left">isoreader</td>
<td align="left">isoreader</td>
</tr>
<tr class="even">
<td align="left">scan</td>
<td align="left">iso_read_scan</td>
<td align="left">.scan.rds</td>
<td align="left">iso_read_rds</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">R Data Storage</td>
<td align="left">isoreader</td>
<td align="left">isoreader</td>
</tr>
<tr class="odd">
<td align="left">dual inlet</td>
<td align="left">iso_read_dual_inlet</td>
<td align="left">.new.did</td>
<td align="left">new_reader</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">R_GlobalEnv</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># copy an example file from the package with the new extension</span></span>
<span><span class="fu"><a href="../reference/iso_get_reader_example.html">iso_get_reader_example</a></span><span class="op">(</span><span class="st">"dual_inlet_example.did"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span>to <span class="op">=</span> <span class="st">"example.new.did"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># read the file</span></span>
<span><span class="fu"><a href="../reference/iso_read_dual_inlet.html">iso_read_dual_inlet</a></span><span class="op">(</span><span class="st">"example.new.did"</span>, read_cache <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Info: preparing to read 1 data files (all will be cached)...</span></span>
<span><span class="co">#&gt; Info: reading file 'example.new.did' with '.new.did' reader...</span></span>
<span><span class="co">#&gt; Info: this is the new reader!</span></span>
<span><span class="co">#&gt; List of 7</span></span>
<span><span class="co">#&gt;  $ version          :Classes 'package_version', 'numeric_version'  hidden list of 1</span></span>
<span><span class="co">#&gt;   ..$ : int [1:3] 1 4 1</span></span>
<span><span class="co">#&gt;  $ read_options     :List of 4</span></span>
<span><span class="co">#&gt;   ..$ file_info        : logi TRUE</span></span>
<span><span class="co">#&gt;   ..$ method_info      : logi TRUE</span></span>
<span><span class="co">#&gt;   ..$ raw_data         : logi TRUE</span></span>
<span><span class="co">#&gt;   ..$ vendor_data_table: logi TRUE</span></span>
<span><span class="co">#&gt;  $ file_info        : tibble [1 × 6] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ file_id      : chr "example.new.did"</span></span>
<span><span class="co">#&gt;   ..$ file_root    : chr "."</span></span>
<span><span class="co">#&gt;   ..$ file_path    : chr "example.new.did"</span></span>
<span><span class="co">#&gt;   ..$ file_subpath : chr NA</span></span>
<span><span class="co">#&gt;   ..$ file_datetime: POSIXct[1:1], format: NA</span></span>
<span><span class="co">#&gt;   ..$ file_size    : int 134446</span></span>
<span><span class="co">#&gt;  $ method_info      : list()</span></span>
<span><span class="co">#&gt;  $ raw_data         : tibble [0 × 0] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  Named list()</span></span>
<span><span class="co">#&gt;  $ vendor_data_table: tibble [0 × 0] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  Named list()</span></span>
<span><span class="co">#&gt;  $ bgrd_data        : tibble [0 × 0] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  Named list()</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:2] "dual_inlet" "iso_file"</span></span>
<span><span class="co">#&gt;  - attr(*, "problems")= tibble [0 × 3] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ type   : chr(0) </span></span>
<span><span class="co">#&gt;   ..$ func   : chr(0) </span></span>
<span><span class="co">#&gt;   ..$ details: chr(0)</span></span>
<span><span class="co">#&gt; Info: finished reading 1 files in 0.13 secs</span></span>
<span><span class="co">#&gt; Dual inlet iso file 'example.new.did': 0 cycles, 0 ions ()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="st">"example.new.did"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>Note that for parallel processing to work during the read process
(<code>parallel = TRUE</code>), isoreader needs to know where to find
the new reader function. It will figure this out automatically as long
as the function name is unique but if this fails (or to be on the safe
side), please specify e.g. <code>env = "R_GlobalEnv"</code> or
<code>env = "newpackage"</code> during the reader registration. Also
note that isoreader will not automatically know where to find all
functions called from within the new reader function if they are not
part of base R and it is recommended to make all outside calls explicit
(e.g. <code>dplyr::filter(...)</code>) to preempt this potential
problem. For info messages and warnings to work with the progress bar
and in parallel reads, make sure to use
<code>isoreader:::log_message(...)</code> and
<code>isoreader:::log_warning(...)</code> instead of base R’s
<code>message(...)</code> and <code>warning(...)</code>.</p>
<p>If you have designed and tested a new reader, please consider
contributing it to the <code>isoreader</code> github repository via pull
request.</p>
</div>
<div class="section level2">
<h2 id="processing-hooks">Processing hooks<a class="anchor" aria-label="anchor" href="#processing-hooks"></a>
</h2>
<p>Isoreader defines two processing hooks at the beginning and end of
reading an individual file. This is useful for integration into
pipelines that require additional output (such as GUIs) but is also
sometimes useful for debugging purposes. The expressions are evaluated
in the context of the <code>isoreader:::read_iso_file</code> function
and have access to all parameters passed to this function, such as
e.g. <code>file_n</code> and <code>path</code>. Same as for new readers:
for info messages and warnings to work with the progress bar and in
parallel reads, make sure to use
<code>isoreader:::log_message(...)</code> and
<code>isoreader:::log_warning(...)</code> instead of base R’s
<code>message(...)</code> and <code>warning(...)</code>. The main
difference between the two is that <code>log_message()</code> will honor
the <code>quiet = TRUE</code> flag passed to the main
<code>iso_read...()</code> call whereas <code>log_warning()</code> will
always show its message no matter the <code>quiet</code> setting.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">isoreader</span><span class="fu">:::</span><span class="fu"><a href="../reference/iso_debug_mode.html">set_read_file_event_expr</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fu">isoreader</span><span class="fu">:::</span><span class="fu">log_message</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"starting file #%.d, named '%s'"</span>, <span class="va">file_n</span>, <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="fu">isoreader</span><span class="fu">:::</span><span class="fu"><a href="../reference/iso_debug_mode.html">set_finish_file_event_expr</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fu">isoreader</span><span class="fu">:::</span><span class="fu">log_message</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"finished file #%.d"</span>, <span class="va">file_n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/iso_get_reader_example.html">iso_get_reader_example</a></span><span class="op">(</span><span class="st">"dual_inlet_example.did"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/iso_get_reader_example.html">iso_get_reader_example</a></span><span class="op">(</span><span class="st">"dual_inlet_example.caf"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/iso_read_dual_inlet.html">iso_read_dual_inlet</a></span><span class="op">(</span>read_cache <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Info: preparing to read 2 data files (all will be cached)...</span></span>
<span><span class="co">#&gt; Info: reading file 'dual_inlet_example.did' with '.did' reader...</span></span>
<span><span class="co">#&gt; Info: starting file #1, named 'dual_inlet_example.did'</span></span>
<span><span class="co">#&gt; Info: finished file #1</span></span>
<span><span class="co">#&gt; Info: reading file 'dual_inlet_example.caf' with '.caf' reader...</span></span>
<span><span class="co">#&gt; Info: starting file #2, named 'dual_inlet_example.caf'</span></span>
<span><span class="co">#&gt; Info: finished file #2</span></span>
<span><span class="co">#&gt; Info: finished reading 2 files in 3.17 secs</span></span>
<span><span class="co">#&gt; Data from 2 dual inlet iso files: </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 6</span></span></span>
<span><span class="co">#&gt;   file_id                file_path_  file_subpath raw_data file_info method_info</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> dual_inlet_example.did dual_inlet… <span style="color: #BB0000;">NA</span>           7 cycle… 16 entri… standards,…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> dual_inlet_example.caf dual_inlet… <span style="color: #BB0000;">NA</span>           8 cycle… 22 entri… standards,…</span></span>
<span></span>
<span><span class="fu">isoreader</span><span class="fu">:::</span><span class="fu">initialize_options</span><span class="op">(</span><span class="op">)</span> <span class="co"># reset all isoreader options</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="debugging-isoreader">Debugging isoreader<a class="anchor" aria-label="anchor" href="#debugging-isoreader"></a>
</h2>
<p>The best way to start debugging an isoreader call is to switch the
package into debug mode. This is done using the internal
<code><a href="../reference/iso_debug_mode.html">iso_turn_debug_on()</a></code> function. This enables debug messages,
turns caching off by default so files are always read anew, and makes
the package keep more information in the isofile objects. It continues
to catch errors inside file readers (keeping track of them in the <a href="operations.html#dealing-with-file-read-problems">problems</a>)
unless you set <code>iso_turn_debug_on(catch_errors = FALSE)</code>, in
which case no errors are caught and stop the processing so you get the
full traceback and debugging options of your IDE.</p>
</div>
<div class="section level2">
<h2 id="debugging-binary-file-reads-isodat">Debugging binary file reads (Isodat)<a class="anchor" aria-label="anchor" href="#debugging-binary-file-reads-isodat"></a>
</h2>
<p>Errors during the binary file reads usually indicate the approximate
position in the file where the error was encountered. The easiest way to
get started on figuring out what the file looks like at that position is
to use a binary file editor and jump to the position. For a sense of the
interpreted structure around that position, one can use
<code><a href="../reference/iso_get_source_file_structure.html">iso_print_source_file_structure()</a></code> which shows what binary
patterns isoreader recognized. This binary representation of the source
file is only available if the file is read while in debug mode,
otherwise file objects would get unnecessarily large:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># turn on debug mode</span></span>
<span><span class="fu">isoreader</span><span class="fu">:::</span><span class="fu"><a href="../reference/iso_debug_mode.html">iso_turn_debug_on</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Info: debug mode turned on, error catching turned on, caching turned off</span></span>
<span><span class="co"># read example file</span></span>
<span><span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/iso_get_reader_example.html">iso_get_reader_example</a></span><span class="op">(</span><span class="st">"dual_inlet_example.did"</span><span class="op">)</span> <span class="op">|&gt;</span>  </span>
<span>  <span class="fu"><a href="../reference/iso_read_dual_inlet.html">iso_read_dual_inlet</a></span><span class="op">(</span>quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># retrieve source structure and print a part of it</span></span>
<span><span class="va">bin</span> <span class="op">&lt;-</span> <span class="va">ex</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/iso_get_source_file_structure.html">iso_get_source_file_structure</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="va">bin</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/iso_get_source_file_structure.html">iso_print_source_file_structure</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Textual representation of the partial structure (bytes 1 - 504) of the isodat file.</span></span>
<span><span class="co">#&gt; # Print more/less by specifying the 'start', 'length' or 'end' parameters.</span></span>
<span><span class="co">#&gt; 0000001: &lt;CFileHeader&gt;{unknown-4: 'fe f7 31 01'}</span></span>
<span><span class="co">#&gt; 0000022:   &lt;06-000&gt;{text-10: 'CBlockData'}{text-18: 'CDualInletDocument'}&lt;4x00&gt;</span></span>
<span><span class="co">#&gt; 0000094:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-20: 'Acquisition-1568.did'}{text-11: 'File Header'}&lt;4x00&gt;</span></span>
<span><span class="co">#&gt; 0000174:   &lt;02-000&gt;</span></span>
<span><span class="co">#&gt; 0000178:   &lt;02-000&gt;</span></span>
<span><span class="co">#&gt; 0000182: &lt;CTimeObject&gt;</span></span>
<span><span class="co">#&gt; 0000199:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-4: 'Date'}{text-4: 'Date'}&lt;4x00&gt;</span></span>
<span><span class="co">#&gt; 0000233:   &lt;01-000&gt;{unknown-4: '4a 2b 4e 54'}</span></span>
<span><span class="co">#&gt; 0000241: &lt;CStr&gt;</span></span>
<span><span class="co">#&gt; 0000251:   &lt;02-000&gt;{text-18: 'RW2000TemplateName'}</span></span>
<span><span class="co">#&gt; 0000295:   &lt;02-000&gt;{text-84: 'C:\Thermo\Isodat NT\Global\User\Dual Inlet System\Result Workshop\Default Result.IRW'}</span></span>
<span><span class="co">#&gt; 0000471: &lt;CDataIndex&gt;</span></span>
<span><span class="co">#&gt; 0000487:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-0: 'NA'}{text-0: 'NA'}&lt;4x00&gt;</span></span></code></pre></div>
<p>This structure representation shows recognized control elements in
<code>&lt;...&gt;</code> and data elements in <code>{...}</code> which
are converted to text or numeric representation if the interpretation is
unambiguous, or plain hexadecimal characters if the nature of the data
cannot be determined with certainty. You can adjust <code>start</code>
and <code>length</code> to look at different parts of the binary file or
save the the structure to a text file with
<code>save_to_file</code>.</p>
<p>For an overview of all the elements (<code>blocks</code>) identified
in the binary file as a tibble, use:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bin</span><span class="op">$</span><span class="va">blocks</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 8</span></span></span>
<span><span class="co">#&gt;    block_idx start   end   len data_len type    priority block               </span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1     1    17    17       11 C block        1 CFileHeader         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2    18    21     4        4 unknown        5 fe f7 31 01         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3    22    25     4        0 x-000          3 06-000              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4    26    49    24       10 text           2 CBlockData          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5    50    89    40       18 text           2 CDualInletDocument  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6    90    93     4        0 0000+          4 4x00                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7    94    97     4        0 x-000          3 03-000              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8    98    99     2        2 unknown        5 2f 00               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9   100   143    44       20 text           2 Acquisition-1568.did</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10   144   169    26       11 text           2 File Header         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11   170   173     4        0 0000+          4 4x00                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>        12   174   177     4        0 x-000          3 02-000              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>        13   178   181     4        0 x-000          3 02-000              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>        14   182   198    17       11 C block        1 CTimeObject         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>        15   199   202     4        0 x-000          3 03-000              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span>        16   203   204     2        2 unknown        5 2f 00               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span>        17   205   216    12        4 text           2 Date                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span>        18   217   228    12        4 text           2 Date                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span>        19   229   232     4        0 0000+          4 4x00                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span>        20   233   236     4        0 x-000          3 01-000</span></span></code></pre></div>
<p>While this provides all elements, the top level structure is provided
by the so-called control blocks:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bin</span><span class="op">$</span><span class="va">blocks</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"C block"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 8</span></span></span>
<span><span class="co">#&gt;    block_idx start   end   len data_len type    priority block                  </span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1     1    17    17       11 C block        1 CFileHeader            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        14   182   198    17       11 C block        1 CTimeObject            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        22   241   250    10        4 C block        1 CStr                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        27   471   486    16       10 C block        1 CDataIndex             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        35   513   535    23       17 C block        1 CSeqLineIndexData      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        43   588   598    11        5 C block        1 CData                  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       113  <span style="text-decoration: underline;">1</span>133  <span style="text-decoration: underline;">1</span>157    25       19 C block        1 CDualInletBlockData    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       121  <span style="text-decoration: underline;">1</span>240  <span style="text-decoration: underline;">1</span>261    22       16 C block        1 CMeasurmentInfos       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       129  <span style="text-decoration: underline;">1</span>324  <span style="text-decoration: underline;">1</span>350    27       21 C block        1 CISLScriptMessageData  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>       163  <span style="text-decoration: underline;">1</span>945  <span style="text-decoration: underline;">1</span>967    23       17 C block        1 CMeasurmentErrors      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>       172  <span style="text-decoration: underline;">2</span>038  <span style="text-decoration: underline;">2</span>060    23       17 C block        1 CDualInletRawData      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>       180  <span style="text-decoration: underline;">2</span>099  <span style="text-decoration: underline;">2</span>114    16       10 C block        1 CBlockData             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>       188  <span style="text-decoration: underline;">2</span>269  <span style="text-decoration: underline;">2</span>302    34       28 C block        1 CIntegrationUnitTransf…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>       199  <span style="text-decoration: underline;">2</span>361  <span style="text-decoration: underline;">2</span>380    20       14 C block        1 CIntensityData         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>       639  <span style="text-decoration: underline;">5</span>299  <span style="text-decoration: underline;">5</span>319    21       15 C block        1 CDualInletShout        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span>       655  <span style="text-decoration: underline;">5</span>460  <span style="text-decoration: underline;">5</span>485    26       20 C block        1 CTwoDoublesArrayData   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span>       827  <span style="text-decoration: underline;">6</span>412  <span style="text-decoration: underline;">6</span>433    22       16 C block        1 CStatusArrayData       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span>       885  <span style="text-decoration: underline;">6</span>747  <span style="text-decoration: underline;">6</span>764    18       12 C block        1 COutlierData           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span>      <span style="text-decoration: underline;">6</span>461 <span style="text-decoration: underline;">40</span>876 <span style="text-decoration: underline;">40</span>902    27       21 C block        1 CResultDataSimpleList  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span>      <span style="text-decoration: underline;">6</span>469 <span style="text-decoration: underline;">40</span>951 <span style="text-decoration: underline;">40</span>973    23       17 C block        1 CResultDataSimple</span></span></code></pre></div>
<p>To look at specific control-blocks, simply provide the relevant start
position to <code><a href="../reference/iso_get_source_file_structure.html">iso_print_source_file_structure()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdata</span> <span class="op">&lt;-</span> <span class="va">bin</span><span class="op">$</span><span class="va">blocks</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">block</span> <span class="op">==</span> <span class="st">"CData"</span><span class="op">)</span></span>
<span><span class="va">cdata</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 8</span></span></span>
<span><span class="co">#&gt;   block_idx start   end   len data_len type    priority block</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>        43   588   598    11        5 C block        1 CData</span></span>
<span></span>
<span><span class="va">bin</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/iso_get_source_file_structure.html">iso_print_source_file_structure</a></span><span class="op">(</span>start <span class="op">=</span> <span class="va">cdata</span><span class="op">$</span><span class="va">start</span>, length <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Textual representation of the partial structure (bytes 588 - 1098) of the isodat file.</span></span>
<span><span class="co">#&gt; # Print more/less by specifying the 'start', 'length' or 'end' parameters.</span></span>
<span><span class="co">#&gt; 0000588: &lt;CData&gt;</span></span>
<span><span class="co">#&gt; 0000599:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-3: '158'}{text-4: 'Line'}&lt;4x00&gt;{unknown-2: '0b 80'}</span></span>
<span><span class="co">#&gt; 0000633:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-1: '1'}{text-11: 'Peak Center'}&lt;4x00&gt;{unknown-2: '0b 80'}</span></span>
<span><span class="co">#&gt; 0000677:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-1: '1'}{text-11: 'Pressadjust'}&lt;4x00&gt;{unknown-2: '0b 80'}</span></span>
<span><span class="co">#&gt; 0000721:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-1: '1'}{text-10: 'Background'}&lt;4x00&gt;{unknown-2: '0b 80'}</span></span>
<span><span class="co">#&gt; 0000763:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-11: 'CIT Carrara'}{text-12: 'Identifier 1'}&lt;4x00&gt;{unknown-2: '0b 80'}</span></span>
<span><span class="co">#&gt; 0000829:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-2: '13'}{text-12: 'Identifier 2'}&lt;4x00&gt;{unknown-2: '0b 80'}</span></span>
<span><span class="co">#&gt; 0000877:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-5: '49077'}{text-8: 'Analysis'}&lt;4x00&gt;{unknown-2: '0b 80'}</span></span>
<span><span class="co">#&gt; 0000923:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-0: 'NA'}{text-7: 'Comment'}&lt;4x00&gt;{unknown-2: '0b 80'}</span></span>
<span><span class="co">#&gt; 0000957:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-0: 'NA'}{text-11: 'Preparation'}&lt;4x00&gt;{unknown-2: '0b 80'}</span></span>
<span><span class="co">#&gt; 0000999:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-0: 'NA'}{text-11: 'Post Script'}&lt;4x00&gt;{unknown-2: '0b 80'}</span></span>
<span><span class="co">#&gt; 0001041:   &lt;03-000&gt;{unknown-2: '2f 00'}{text-16: 'CO2_multiply_16V'}{text-6: 'Method'}</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Sebastian Kopf, Brett Davidheiser-Kroll, Ilja Kocken.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
